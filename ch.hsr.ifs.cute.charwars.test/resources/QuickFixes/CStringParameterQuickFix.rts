//!CStringParameterQuickFix1
//@main.cpp
#include "iostream.h"
#include "string.h"
#include "cstring.h"

void inspect(const char *filename);

int main() {
	inspect("myfile.txt");
	inspect("mypic.jpg");
	inspect("aworddoc.doc");
}

void inspect(const char *filename) {
	if (filename) {
		const char* ext = strrchr(filename, '.');
		if (!strcmp(ext, ".txt")) {
			std::cout << "This is a text file";
		} else if (!strcmp(ext, ".jpg")) {
			std::cout << "This is a picture file";
		}
	}
}
//=
#include "iostream.h"
#include "string.h"
#include "cstring.h"

void inspect(const std::string& filename);
void inspect(const char *filename);

int main() {
	inspect("myfile.txt");
	inspect("mypic.jpg");
	inspect("aworddoc.doc");
}

void inspect(const std::string& filename) {
	const char* ext = strrchr(filename.c_str(), '.');
	if (!strcmp(ext, ".txt")) {
		std::cout << "This is a text file";
	} else if (!strcmp(ext, ".jpg")) {
		std::cout << "This is a picture file";
	}
}

void inspect(const char *filename) {
	if (filename) {
		inspect(std::string(filename));
	}
}


//!CStringParameterQuickFix2
//@main.cpp
#include "iostream.h"
#include "string.h"

void printFileType(const char *file);

int main() {
}

void printFileType(const char *file) {
	if(file) {
		if(strcmp(file+strlen(file)-4, ".jpg") == 0) {
			std::cout << "Image file" << std::endl;
		}
		if(strcmp(file+strlen(file)-4, ".mp3") == 0) {
			std::cout << "Sound file" << std::endl;
		}
		if(strcmp(file+strlen(file)-4, ".txt") == 0) {
			std::cout << "Text file" << std::endl;
		}
	}
}
//=
#include "iostream.h"
#include "string.h"

void printFileType(const std::string& file);
void printFileType(const char *file);

int main() {
}

void printFileType(const std::string& file) {
	if (file.compare(file.size() - 4, std::string::npos, ".jpg") == 0) {
		std::cout << "Image file" << std::endl;
	}
	if (file.compare(file.size() - 4, std::string::npos, ".mp3") == 0) {
		std::cout << "Sound file" << std::endl;
	}
	if (file.compare(file.size() - 4, std::string::npos, ".txt") == 0) {
		std::cout << "Text file" << std::endl;
	}
}

void printFileType(const char *file) {
	if (file) {
		printFileType(std::string(file));
	}
}


//!CStringParameterQuickFixGuardClause1
//@main.cpp
#include "iostream.h"
#include "string.h"

void func(int i, const char *str);

int main() {
}

void func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (!str) {
		std::cout << "B" << std::endl;
		return;
	}
	
	std::cout << "C" << std::endl;
}
//=
#include "iostream.h"
#include "string.h"

void func(int i, const std::string& str);
void func(int i, const char *str);

int main() {
}

void func(int i, const std::string& str) {
	std::cout << "C" << std::endl;
}

void func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (!str) {
		std::cout << "B" << std::endl;
		return;
	}
	func(i, std::string(str));
}


//!CStringParameterQuickFixGuardClause2
//@main.cpp
#include "iostream.h"
#include "string.h"

void func(int i, const char *str);

int main() {
}

void func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (!str)
		return;
	
	std::cout << "B" << std::endl;
}
//=
#include "iostream.h"
#include "string.h"

void func(int i, const std::string& str);
void func(int i, const char *str);

int main() {
}

void func(int i, const std::string& str) {
	std::cout << "B" << std::endl;
}

void func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (!str)
		return;

	func(i, std::string(str));
}


//!CStringParameterQuickFixGuardClause3
//@main.cpp
#include "iostream.h"
#include "string.h"

int func(int i, const char *str);

int main() {
}

int func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (!str) {
		std::cout << "B" << std::endl;
		return -1;
	}
	
	std::cout << "C" << std::endl;
	return 0;
}
//=
#include "iostream.h"
#include "string.h"

int func(int i, const std::string& str);
int func(int i, const char *str);

int main() {
}

int func(int i, const std::string& str) {
	std::cout << "C" << std::endl;
	return 0;
}

int func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (!str) {
		std::cout << "B" << std::endl;
		return -1;
	}
	return func(i, std::string(str));
}


//!CStringParameterQuickFixGuardClause4
//@main.cpp
#include "iostream.h"
#include "string.h"

int func(int i, const char *str);

int main() {
}

int func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (i < 0 || !str) {
		std::cout << "B" << std::endl;
		return -1;
	}
	
	std::cout << "C" << std::endl;
	return 0;
}
//=
#include "iostream.h"
#include "string.h"

int func(int i, const std::string& str);
int func(int i, const char *str);

int main() {
}

int func(int i, const std::string& str) {
	std::cout << "C" << std::endl;
	return 0;
}

int func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (i < 0 || !str) {
		std::cout << "B" << std::endl;
		return -1;
	}
	return func(i, std::string(str));
}


//!CStringParameterQuickFixGuardClause5
//@main.cpp
#include "iostream.h"
#include "string.h"

int func(int i, const char *str);

int main() {
}

int func(int i, const char *str) {
	assert(str);
	std::cout << str << std::endl;
	return 0;
}
//=
#include "iostream.h"
#include "string.h"

int func(int i, const std::string& str);
int func(int i, const char *str);

int main() {
}

int func(int i, const std::string& str) {
	std::cout << str << std::endl;
	return 0;
}

int func(int i, const char *str) {
	assert(str);
	return func(i, std::string(str));
}


//!CStringParameterQuickFixNullCheck1
//@main.cpp
#include "iostream.h"
#include "string.h"

void func(const char *str);

int main() {
}

void func(const char *str) {
	std::cout << "A" << std::endl;
	
	if (str) {
		bool equal = strcmp(str, "test") == 0;
		std::cout << "B" << std::endl;
	} else {
		std::cout << "C" << std::endl;
	}
	
	std::cout << "D" << std::endl;
}
//=
#include "iostream.h"
#include "string.h"

void func(const std::string& str);
void func(const char *str);

int main() {
}

void func(const std::string& str) {
	bool equal = str == "test";
	std::cout << "B" << std::endl;
}

void func(const char *str) {
	std::cout << "A" << std::endl;
	
	if (str) {
		func(std::string(str));
	} else {
		std::cout << "C" << std::endl;
	}
	
	std::cout << "D" << std::endl;
}


//!CStringParameterQuickFixNullCheck2
//@main.cpp
#include "iostream.h"
#include "string.h"

void func(const char *str);

int main() {
}

void func(const char *str) {
	std::cout << "A" << std::endl;
	
	if (!str) {
		std::cout << "B" << std::endl;
	} else {
		bool equal = strcmp(str, "test") == 0;
		std::cout << "C" << std::endl;
	}
	
	std::cout << "D" << std::endl;
}
//=
#include "iostream.h"
#include "string.h"

void func(const std::string& str);
void func(const char *str);

int main() {
}

void func(const std::string& str) {
	bool equal = str == "test";
	std::cout << "C" << std::endl;
}

void func(const char *str) {
	std::cout << "A" << std::endl;
	
	if (!str) {
		std::cout << "B" << std::endl;
	} else {
		func(std::string(str));
	}
	
	std::cout << "D" << std::endl;
}


//!CStringParameterQuickFixNullCheck3
//@main.cpp
#include "iostream.h"
#include "string.h"

int func(const char *str);

int main() {
}

int func(const char *str) {
	std::cout << "A" << std::endl;
	
	if (str) {
		bool equal = strcmp(str, "test") == 0;
		std::cout << "B" << std::endl;
		return 0;
	} else {
		std::cout << "C" << std::endl;
	}
	
	std::cout << "D" << std::endl;
	return -1;
}
//=
#include "iostream.h"
#include "string.h"

int func(const std::string& str);
int func(const char *str);

int main() {
}

int func(const std::string& str) {
	bool equal = str == "test";
	std::cout << "B" << std::endl;
	return 0;
}

int func(const char *str) {
	std::cout << "A" << std::endl;
	
	if (str) {
		return func(std::string(str));
	} else {
		std::cout << "C" << std::endl;
	}
	
	std::cout << "D" << std::endl;
	return -1;
}


//!CStringParameterQuickFixNullCheck4
//@main.cpp
#include "iostream.h"
#include "string.h"

void func(int i, const char *str);

int main() {
}

void func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (str) {
		bool equal = strcmp(str, "test") == 0;
		std::cout << "B" << std::endl;
	}
	
	std::cout << "C" << std::endl;
}
//=
#include "iostream.h"
#include "string.h"

void func(int i, const std::string& str);
void func(int i, const char *str);

int main() {
}

void func(int i, const std::string& str) {
	bool equal = str == "test";
	std::cout << "B" << std::endl;
}

void func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (str) {
		func(i, std::string(str));
	}
	
	std::cout << "C" << std::endl;
}


//!CStringParameterQuickFixNullCheck5
//@main.cpp
#include "iostream.h"
#include "string.h"

void func(int i, const char *str);

int main() {
}

void func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (i > 0 && str) {
		bool equal = strcmp(str, "test") == 0;
		std::cout << "B" << std::endl;
	}
	
	std::cout << "C" << std::endl;
}
//=
#include "iostream.h"
#include "string.h"

void func(int i, const std::string& str);
void func(int i, const char *str);

int main() {
}

void func(int i, const std::string& str) {
	bool equal = str == "test";
	std::cout << "B" << std::endl;
}

void func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (i > 0 && str) {
		func(i, std::string(str));
	}
	
	std::cout << "C" << std::endl;
}


//!CStringParameterQuickFixNullCheck6
//@main.cpp
#include "iostream.h"
#include "string.h"

void func(int i, const char *str);

int main() {
}

void func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (i <= 0 || !str) {
		std::cout << "B" << std::endl;
	}
	else {
		bool equal = strcmp(str, "test") == 0;
		std::cout << "C" << std::endl;
	}
	
	std::cout << "D" << std::endl;
}
//=
#include "iostream.h"
#include "string.h"

void func(int i, const std::string& str);
void func(int i, const char *str);

int main() {
}

void func(int i, const std::string& str) {
	bool equal = str == "test";
	std::cout << "C" << std::endl;
}

void func(int i, const char *str) {
	std::cout << "A" << std::endl;
	
	if (i <= 0 || !str) {
		std::cout << "B" << std::endl;
	}
	else {
		func(i, std::string(str));
	}
	
	std::cout << "D" << std::endl;
}


//!CStringParameterQuickFixResultVariable1
//@main.cpp
#include "iostream.h"
#include "string.h"

int func(int i, const char *str);

int main() {
}

int func(int i, const char *str) {
	int res = 0;
	
	if (str) {
		std::cout << "A" << std::endl;
		res = strlen(str);
	}
	
	return res;
}
//=
#include "iostream.h"
#include "string.h"

int func(int i, const std::string& str);
int func(int i, const char *str);

int main() {
}

int func(int i, const std::string& str) {
	int res = 0;
	std::cout << "A" << std::endl;
	res = str.size();
	return res;
}

int func(int i, const char *str) {
	int res = 0;
	
	if (str) {
		res = func(i, std::string(str));
	}
	
	return res;
}


//!CStringParameterQuickFixResultVariable2
//@main.cpp
#include "iostream.h"
#include "string.h"

int func(int i, const char *str);

int main() {
}

int func(int i, const char *str) {
	int res;
	
	if (str) {
		std::cout << "A" << std::endl;
		res = strlen(str);
	}
	else {
		std::cout << "B" << std::endl;
		res = -1;
	}
	
	return res;
}
//=
#include "iostream.h"
#include "string.h"

int func(int i, const std::string& str);
int func(int i, const char *str);

int main() {
}

int func(int i, const std::string& str) {
	int res;
	std::cout << "A" << std::endl;
	res = str.size();
	return res;
}

int func(int i, const char *str) {
	int res;
	
	if (str) {
		res = func(i, std::string(str));
	}
	else {
		std::cout << "B" << std::endl;
		res = -1;
	}
	
	return res;
}


//!CStringParameterQuickFixResultVariable3
//@main.cpp
#include "iostream.h"
#include "string.h"

int func(int i, const char *str);

int main() {
}

int func(int i, const char *str) {
	int res;
	
	if (!str) {
		std::cout << "A" << std::endl;
		res = -1;
	}
	else {
		std::cout << "B" << std::endl;
		res = strlen(str);
	}
	
	return res;
}
//=
#include "iostream.h"
#include "string.h"

int func(int i, const std::string& str);
int func(int i, const char *str);

int main() {
}

int func(int i, const std::string& str) {
	int res;
	std::cout << "B" << std::endl;
	res = str.size();
	return res;
}

int func(int i, const char *str) {
	int res;
	
	if (!str) {
		std::cout << "A" << std::endl;
		res = -1;
	}
	else {
		res = func(i, std::string(str));
	}
	
	return res;
}


//!CStringParameterQuickFixHHVMExample1
//@main.cpp
#include "string.h"

std::string getCommand(const char* serverObject);

int main() {
}

std::string getCommand(const char* serverObject) {
	assert(serverObject);
	if (!*serverObject) {
		return "";
	}
	
	while (*serverObject == '/') {
		++serverObject;
	}
	return serverObject;
}
//=
#include "string.h"

std::string getCommand(const std::string& serverObject);
std::string getCommand(const char* serverObject);

int main() {
}

std::string getCommand(const std::string& serverObject) {
	if (serverObject.empty()) {
		return "";
	}
	std::string::size_type serverObject_pos = 0;
	while (serverObject[serverObject_pos] == '/') {
		++serverObject_pos;
	}
	return (serverObject.c_str() + serverObject_pos);
}

std::string getCommand(const char* serverObject) {
	assert(serverObject);
	return getCommand(std::string(serverObject));
}