<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>CUTE - Theory of Operation and Goals - C++ Unit Testing Easier</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<link rel='shortcut icon' href='http://cute-test.com/favicon.ico?1293099743' />
<link href="../../../themes/cute/stylesheets/applicationade1.css?1295341309" media="all" rel="stylesheet" type="text/css" />

<script src="http://cute-test.com/javascripts/prototype.js?1251746896" type="text/javascript"></script>
<script src="http://cute-test.com/javascripts/effects.js?1254993814" type="text/javascript"></script>
<script src="http://cute-test.com/javascripts/dragdrop.js?1254993814" type="text/javascript"></script>
<script src="http://cute-test.com/javascripts/controls.js?1254993814" type="text/javascript"></script>
<script src="http://cute-test.com/javascripts/application.js?1293099743" type="text/javascript"></script>
<link href="../../../stylesheets/jstoolbara45c.css?1293099743" media="screen" rel="stylesheet" type="text/css" />
<!--[if IE]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1293099743);}
    </style>
<![endif]-->

<!-- page specific tags -->

  <link href="../../../stylesheets/scma45c.css?1293099743" media="screen" rel="stylesheet" type="text/css" />
</head>
<body class="theme-Cute controller-wiki action-index">
<div id="wrapper">
<div id="wrapper2">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="http://cute-test.com/login" class="login">Sign in</a></li>
<li><a href="http://cute-test.com/account/register" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="http://cute-test.com/" class="home">Home</a></li>
<li><a href="http://cute-test.com/projects" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>
      
<div id="header">
    <div id="quick-search">
        <form action="http://cute-test.com/search/index/cute" method="get">
        <input name="wiki_pages" type="hidden" value="1" />
        <a href="http://cute-test.com/search/index/cute" accesskey="4">Search</a>:
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
        </form>
        
    </div>
    
    <h1>CUTE</h1>
    
    
    <div id="main-menu">
        <ul><li><a href="http://cute-test.com/projects/cute" class="overview">Overview</a></li>
<li><a href="http://cute-test.com/projects/cute/activity" class="activity">Activity</a></li>
<li><a href="http://cute-test.com/projects/cute/news" class="news">News</a></li>
<li><a href="http://cute-test.com/projects/cute/wiki" class="wiki selected">Wiki</a></li>
<li><a href="http://cute-test.com/projects/cute/files" class="files">Files</a></li></ul>
    </div>
    
</div>

<div class="" id="main">
    <div id="sidebar">        
        
    <h1 id="Cute">Cute<a href="#Cute" class="wiki-anchor">&para;</a></h1>


	<p><strong><a href="http://cute-test.com/projects/cute/wiki">Main</a></strong></p>


	<p><strong><a href="User_Guide.html" class="wiki-page">User Guide</a></strong></p>


	<p><strong><a href="http://www.ifs.hsr.ch/" class="external">Contact</a></strong></p>

<h3>Wiki</h3>

<a href="http://cute-test.com/projects/cute/wiki">Start page</a><br />
<a href="Page_index.html">Index by title</a><br />
<a href="Date_index.html">Index by date</a><br />


        
    </div>
    
    <div id="content">
				
        <div class="contextual">


<span id="watcher"></span>






<a href="Theory_of_Operation_and_Goals/history.html" class="icon icon-history">History</a>
</div>

<p class="breadcrumb"><a href="User_Guide.html">User Guide</a> &#187; </p>


    <p>    
    <a href="Theory_of_Operation_and_Goals7fb8.html?version=3">&#171; Previous</a> - 
    Version 4/8
    (<a href="http://cute-test.com/wiki/cute/Theory_of_Operation_and_Goals/diff?version=4">diff</a>) - 
    <a href="Theory_of_Operation_and_Goals79ee.html?version=5">Next &#187;</a> - 
    <a href="Theory_of_Operation_and_Goals.html">Current version</a>
    <br />
    <em>Emanuel Graf, 13 Jan 2011 14:40 </em><br />
    
    </p>
    <hr />


<div class="wiki">
  <h1 id="Theory-of-Operation-and-Goals-of-CUTE">Theory of Operation and Goals of CUTE<a href="#Theory-of-Operation-and-Goals-of-CUTE" class="wiki-anchor">&para;</a></h1>


	<p>CUTE leverages modern C++ libraries and features to make writing C++ unit tests easier. For example, one disadvantage of <a href="http://sourceforge.net/apps/mediawiki/cppunit/index.php?title=Main_Page" class="external">CppUnit</a> is that you have to write a subclass in order to have your own test case. This is a lot of programmer overhead, especially when you want to start small.</p>


	<p>CUTE stands for C++ Unit Testing Easier. This article was first published by Peter Sommerlad in <a href="http://accu.org/index.php/journals/1349" class="external">ACCU Overload Journal #75</a>. It is maintained here in the wiki with updates to match the current version of CUTE.</p>


	<p>I was inspired by Kevlin Henney's Java testing framework called JUTLAND (Java Unit Testing: Light, Adaptable 'n' Discreet), and the corresponding presentation he gave at JAOO 2005. In addition, I wondered if I could come up with a design that is similarly orthogonal, easily extendable and also much simpler to use than current C++ unit testing approaches.</p>


	<p>Here you will learn how to use CUTE in your projects and also some of the more modern C++ coding techniques employed for its implementation. I also ask you to give feedback to help me further simplify and improve CUTE.</p>


	<h2 id="My-Problems-with-CppUnit">My Problems with CppUnit<a href="#My-Problems-with-CppUnit" class="wiki-anchor">&para;</a></h2>


	<p>Inheritance is a very strong coupling between classes. Requiring a test case class to inherit from a CppUnit framework class couples both closely together. The <a href="http://cppunit.sourceforge.net/doc/lastest/cppunit_cookbook.html" class="external">CppUnit Cookbook</a> tutorial lists at least 6 classes you must deal with in order to get things up and running. You even have to decide if you want to inherit from TestCase or TestFixture for even the simplest test case. I do not want to go into more details, but this is how I want to write tests:</p>


<pre><code class="cpp syntaxhl"><span class="CodeRay"><span class="no">1</span> <span class="pp">#include</span> <span class="ic">&quot;cute.h&quot;</span> 
<span class="no">2</span> <span class="pt">int</span> lifeTheUniverseAndEverything = <span class="i">42</span>;
<span class="no">3</span> 
<span class="no">4</span> <span class="di">void</span> mysimpletest(){
<span class="no">5</span>     ASSERT(lifeTheUniverseAndEverything == <span class="i">6</span>*<span class="i">7</span>);
<span class="no">6</span> }
</span></code></pre><br />That's it. A simple test is a simple void function. Done. Well, almost done.

	<p>In addition, CppUnit originated in the days of non-standard C++ compilers, when the more modern features of the language were just not broadly available. From a modern perspective, this limits its design.</p>


	<p>Today, all relevant compilers (with the exception of the still in use MSVC6) are able to compile most of standard C++ and the proposed std::tr1 libraries from Boost.</p>


	<h2 id="Running-a-Single-Test">Running a Single Test<a href="#Running-a-Single-Test" class="wiki-anchor">&para;</a></h2>


	<p>Since we lack some of the reflection mechanisms available in Java, testing with CUTE requires its own main function. For simple cases this is straightforward. As with CppUnit you instantiate a runner object and pass it your test. The simplest possible way to produce some output is:</p>


<pre><code class="cpp syntaxhl"><span class="CodeRay"><span class="no"> 1</span> <span class="pp">#include</span> <span class="ic">&lt;iostream&gt;</span>
<span class="no"> 2</span> <span class="pp">#include</span> <span class="ic">&quot;cute_runner.h&quot;</span> 
<span class="no"> 3</span> <span class="pt">int</span> main(){
<span class="no"> 4</span>     <span class="di">using</span> <span class="r">namespace</span> std;
<span class="no"> 5</span> 
<span class="no"> 6</span>     <span class="r">if</span> (cute::runner&lt;&gt;()(mysimpletest)){
<span class="no"> 7</span>         cout &lt;&lt; <span class="s"><span class="dl">&quot;</span><span class="k">OK</span><span class="dl">&quot;</span></span> &lt;&lt; endl;
<span class="no"> 8</span>     } <span class="r">else</span> {
<span class="no"> 9</span>         cout &lt;&lt; <span class="s"><span class="dl">&quot;</span><span class="k">failed</span><span class="dl">&quot;</span></span> &lt;&lt; endl;
<span class="no"><strong>10</strong></span>     }   
<span class="no">11</span> }
</span></code></pre>

	<p>This may not yet be very impressive, but it is simple. Reporting test outcome is important, so CUTE provides a means to configure the runner with a listener. You may have wondered why cute::runner has template brackets. This is where you specify the listener class:</p>


<pre><code class="cpp syntaxhl"><span class="CodeRay"><span class="no">1</span> <span class="pt">int</span> main(){
<span class="no">2</span>     <span class="di">using</span> <span class="r">namespace</span> std;
<span class="no">3</span> 
<span class="no">4</span>     cute::runner&lt;cute::ostream_listener&gt;()(mysimpletest);
<span class="no">5</span> }
</span></code></pre>

	<p>This test succeeds and outputs,</p>


<pre><code>
"void () () OK" 
</code></pre>

	<p>From the above test result, we know only that a void function without any arguments ran successfully. This shows the C++ introspection limitation, which only provides type information, not function names. But the preprocessor can help us. We make our test cuter by applying the macro <acronym title="">CUTE</acronym>:</p>


<pre><code class="cpp syntaxhl"><span class="CodeRay"><span class="no">1</span> cute::runner&lt;cute::ostream_listener&gt;()(
<span class="no">2</span>     CUTE(mysimpletest));
</span></code></pre>

	<p>This test succeeds, it produces the terse output mysimpletest OK. However, if we make the test fail by setting the variable to lifeTheUniverseAndEverything to 41 instead of 42, we get,</p>


<pre><code>
../simpletest.cpp:6: testcase failed: lifeTheUniverseAndEverything == 6*7 in mysimpletest
</code></pre>

	<p>This failure message contains everything we need to find the origin of the failure, plus some context help to hint at the problem. You probably already guessed that the preprocessor macro <acronym title="">ASSERT</acronym> from cute.h contains the magic that collects this interesting information.</p>


	<p>For a better integration into Visual Studio and Eclipse IDEs, CDT CUTE now provides yet another listener, cute::ide_listener. This listener allows navigation from failure messages to their source, and even provides a red/green bar UI within Eclipse CDT.</p>
</div>














        
				<div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
	
<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="http://www.redmine.org/">Redmine</a> &copy; 2006-2010 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-22096374-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>

</html>
